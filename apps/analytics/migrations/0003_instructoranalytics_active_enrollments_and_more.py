# Generated by Django 5.2.4 on 2025-07-13 14:09

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('analytics', '0002_aiinsights_assessmentanalytics_contentinteraction_and_more'),
        ('assessments', '0001_initial'),
        ('core', '0001_initial'),
        ('courses', '0002_course_category_course_difficulty_level_and_more'),
        ('learning_paths', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name='instructoranalytics',
            name='active_enrollments',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='instructoranalytics',
            name='content_items_created',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='instructoranalytics',
            name='modules_created',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='instructoranalytics',
            name='pending_grading',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='instructoranalytics',
            name='published_this_month',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='instructoranalytics',
            name='total_enrollments',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AddField(
            model_name='revenueanalytics',
            name='avg_per_course',
            field=models.DecimalField(decimal_places=2, default=0, max_digits=8),
        ),
        migrations.AddField(
            model_name='revenueanalytics',
            name='growth_rate',
            field=models.DecimalField(decimal_places=2, default=0, help_text='Growth rate percentage', max_digits=5),
        ),
        migrations.AddField(
            model_name='revenueanalytics',
            name='instructor',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='revenue_analytics', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='revenueanalytics',
            name='monthly_revenue',
            field=models.DecimalField(decimal_places=2, default=0, max_digits=10),
        ),
        migrations.CreateModel(
            name='ActivityFeed',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('activity_type', models.CharField(choices=[('course_enrollment', 'Course Enrollment'), ('course_completion', 'Course Completion'), ('lesson_completion', 'Lesson Completion'), ('assessment_submission', 'Assessment Submission'), ('assessment_passed', 'Assessment Passed'), ('discussion_post', 'Discussion Post'), ('assignment_submission', 'Assignment Submission'), ('certificate_earned', 'Certificate Earned'), ('badge_earned', 'Badge Earned'), ('peer_review_submitted', 'Peer Review Submitted'), ('learning_path_started', 'Learning Path Started'), ('learning_path_completed', 'Learning Path Completed')], max_length=50)),
                ('title', models.CharField(help_text='Title of the activity', max_length=255)),
                ('description', models.TextField(help_text='Description of the activity')),
                ('metadata', models.JSONField(blank=True, help_text='Additional activity metadata', null=True)),
                ('is_public', models.BooleanField(default=True, help_text='Whether this activity is visible to others')),
                ('importance', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High')], default='medium', max_length=10)),
                ('course', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='activity_feeds', to='courses.course')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_feeds', to='core.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_feeds', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', 'course'], name='analytics_a_user_id_6dcd65_idx'), models.Index(fields=['activity_type', 'created_at'], name='analytics_a_activit_3da408_idx'), models.Index(fields=['is_public', 'created_at'], name='analytics_a_is_publ_a6d5c6_idx')],
            },
        ),
        migrations.CreateModel(
            name='CollaborativeProject',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('due_date', models.DateTimeField(blank=True, null=True)),
                ('max_participants', models.PositiveIntegerField(default=4)),
                ('status', models.CharField(choices=[('planning', 'Planning'), ('in_progress', 'In Progress'), ('submitted', 'Submitted'), ('graded', 'Graded'), ('completed', 'Completed')], default='planning', max_length=20)),
                ('total_contributions', models.PositiveIntegerField(default=0)),
                ('avg_participation_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('completion_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='collaborative_projects', to='courses.course')),
                ('participants', models.ManyToManyField(related_name='collaborative_projects', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='collaborative_projects', to='core.tenant')),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['course', 'status'], name='analytics_c_course__f67c44_idx'), models.Index(fields=['due_date', 'status'], name='analytics_c_due_dat_3ce2b5_idx')],
            },
        ),
        migrations.CreateModel(
            name='DiscussionInteraction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('interaction_type', models.CharField(choices=[('post', 'Post'), ('reply', 'Reply'), ('like', 'Like'), ('share', 'Share'), ('bookmark', 'Bookmark'), ('view', 'View')], max_length=20)),
                ('discussion_id', models.CharField(help_text='ID of the discussion thread', max_length=255)),
                ('post_id', models.CharField(blank=True, help_text='ID of the specific post', max_length=255, null=True)),
                ('content_length', models.PositiveIntegerField(default=0, help_text='Length of content in characters')),
                ('likes_received', models.PositiveIntegerField(default=0)),
                ('replies_received', models.PositiveIntegerField(default=0)),
                ('quality_score', models.DecimalField(blank=True, decimal_places=2, help_text='Quality score (0-100)', max_digits=5, null=True)),
                ('helpfulness_rating', models.DecimalField(blank=True, decimal_places=2, help_text='Helpfulness rating (1-5)', max_digits=3, null=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discussion_interactions', to='courses.course')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discussion_interactions', to='core.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discussion_interactions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', 'course'], name='analytics_d_user_id_6f0993_idx'), models.Index(fields=['interaction_type', 'created_at'], name='analytics_d_interac_45a394_idx')],
            },
        ),
        migrations.CreateModel(
            name='LearningPathEnrollment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('enrolled_at', models.DateTimeField(auto_now_add=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('current_step', models.PositiveIntegerField(default=0)),
                ('total_steps', models.PositiveIntegerField(default=0)),
                ('completion_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('status', models.CharField(choices=[('enrolled', 'Enrolled'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('paused', 'Paused'), ('dropped', 'Dropped')], default='enrolled', max_length=20)),
                ('estimated_completion_time', models.DurationField(blank=True, null=True)),
                ('actual_time_spent', models.DurationField(blank=True, null=True)),
                ('learning_path', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='learning_paths.learningpath')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='learning_path_enrollments', to='core.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='learning_path_enrollments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-enrolled_at'],
                'unique_together': {('user', 'learning_path')},
            },
        ),
        migrations.CreateModel(
            name='NotificationMetrics',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('notification_type', models.CharField(choices=[('course_reminder', 'Course Reminder'), ('assignment_due', 'Assignment Due'), ('grade_available', 'Grade Available'), ('discussion_reply', 'Discussion Reply'), ('course_update', 'Course Update'), ('achievement', 'Achievement'), ('system_alert', 'System Alert')], max_length=50)),
                ('sent_at', models.DateTimeField(auto_now_add=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('clicked_at', models.DateTimeField(blank=True, null=True)),
                ('channel', models.CharField(choices=[('email', 'Email'), ('push', 'Push Notification'), ('sms', 'SMS'), ('in_app', 'In-App')], max_length=20)),
                ('status', models.CharField(choices=[('sent', 'Sent'), ('delivered', 'Delivered'), ('read', 'Read'), ('clicked', 'Clicked'), ('failed', 'Failed'), ('bounced', 'Bounced')], default='sent', max_length=20)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notification_metrics', to='core.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notification_metrics', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-sent_at'],
                'indexes': [models.Index(fields=['user', 'notification_type'], name='analytics_n_user_id_d305a8_idx'), models.Index(fields=['status', 'sent_at'], name='analytics_n_status_161a87_idx')],
            },
        ),
        migrations.CreateModel(
            name='PeerReview',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assignment_id', models.CharField(help_text='ID of the assignment being reviewed', max_length=255)),
                ('rating', models.DecimalField(decimal_places=2, help_text='Rating given (1-5)', max_digits=3)),
                ('feedback', models.TextField(help_text='Written feedback')),
                ('feedback_quality', models.DecimalField(blank=True, decimal_places=2, help_text='Quality of feedback (0-100)', max_digits=5, null=True)),
                ('helpfulness_rating', models.DecimalField(blank=True, decimal_places=2, help_text='How helpful was this review (1-5)', max_digits=3, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('submitted', 'Submitted'), ('reviewed', 'Reviewed'), ('disputed', 'Disputed')], default='pending', max_length=20)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('assessment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='peer_reviews', to='assessments.assessment')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='peer_reviews', to='courses.course')),
                ('reviewee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='peer_reviews_received', to=settings.AUTH_USER_MODEL)),
                ('reviewer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='peer_reviews_given', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='peer_reviews', to='core.tenant')),
            ],
            options={
                'ordering': ['-created_at'],
                'unique_together': {('reviewer', 'reviewee', 'assignment_id')},
            },
        ),
        migrations.CreateModel(
            name='StudyGroup',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('max_members', models.PositiveIntegerField(default=8)),
                ('total_sessions', models.PositiveIntegerField(default=0)),
                ('avg_session_duration', models.DurationField(blank=True, null=True)),
                ('last_activity', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='study_groups', to='courses.course')),
                ('members', models.ManyToManyField(related_name='study_groups', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='study_groups', to='core.tenant')),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['course', 'is_active'], name='analytics_s_course__62d2d1_idx'), models.Index(fields=['last_activity'], name='analytics_s_last_ac_9aa62c_idx')],
            },
        ),
        migrations.CreateModel(
            name='StudySession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('session_id', models.CharField(help_text='Unique session identifier', max_length=255, unique=True)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('ended_at', models.DateTimeField(blank=True, null=True)),
                ('duration', models.DurationField(blank=True, help_text='Total session duration', null=True)),
                ('pages_visited', models.PositiveIntegerField(default=0)),
                ('videos_watched', models.PositiveIntegerField(default=0)),
                ('quizzes_attempted', models.PositiveIntegerField(default=0)),
                ('downloads', models.PositiveIntegerField(default=0)),
                ('device_type', models.CharField(choices=[('desktop', 'Desktop'), ('mobile', 'Mobile'), ('tablet', 'Tablet')], default='desktop', max_length=20)),
                ('browser', models.CharField(blank=True, max_length=50)),
                ('os', models.CharField(blank=True, max_length=50)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('country', models.CharField(blank=True, max_length=100)),
                ('region', models.CharField(blank=True, max_length=100)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('engagement_score', models.DecimalField(blank=True, decimal_places=2, help_text='Engagement score (0-100)', max_digits=5, null=True)),
                ('focus_time', models.DurationField(blank=True, help_text='Estimated focused study time', null=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='study_sessions', to='courses.course')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='study_sessions', to='core.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='study_sessions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-started_at'],
                'indexes': [models.Index(fields=['user', 'course'], name='analytics_s_user_id_d7928a_idx'), models.Index(fields=['started_at', 'ended_at'], name='analytics_s_started_c2c2fc_idx'), models.Index(fields=['device_type', 'started_at'], name='analytics_s_device__f42490_idx')],
            },
        ),
    ]
